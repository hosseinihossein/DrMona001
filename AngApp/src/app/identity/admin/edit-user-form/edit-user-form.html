<h3>Edit User "{{userModel()?.fullName}}"</h3>

<mat-form-field>
    <mat-label>Username</mat-label>
    <input type="text" matInput [formControl]="username_FormControl" required>
    @if((username_FormControl.dirty || username_FormControl.touched) &&
    username_FormControl.invalid && username_FormControl.hasError("required")){
    <mat-error>username is required!</mat-error>
    }
    @if((username_FormControl.dirty || username_FormControl.touched) &&
    username_FormControl.invalid && username_FormControl.hasError("minlength")){
    <mat-error>username must be more than 3 characters long!</mat-error>
    }
    @if((username_FormControl.dirty || username_FormControl.touched) &&
    username_FormControl.invalid && username_FormControl.hasError("maxlength")){
    <mat-error>username must be less than 32 characters long!</mat-error>
    }
</mat-form-field>

<mat-form-field>
    <mat-label>Password</mat-label>
    <input [type]="hidePassword() ? 'password' : 'text'" matInput [formControl]="password_FormControl" required>
    <button type="button" matIconButton matSuffix (click)="changeVisibility()" [attr.aria-label]="'Hide password'"
        [attr.aria-pressed]="hidePassword()">
        <mat-icon>{{hidePassword() ? 'visibility' : 'visibility_off'}}</mat-icon>
    </button>
    @if((password_FormControl.dirty || password_FormControl.touched) &&
    password_FormControl.invalid && password_FormControl.hasError("required")){
    <mat-error>username is required!</mat-error>
    }
    @if((password_FormControl.dirty || password_FormControl.touched) &&
    password_FormControl.invalid && password_FormControl.hasError("minlength")){
    <mat-error>username must be more than 5 characters long!</mat-error>
    }
    @if((password_FormControl.dirty || password_FormControl.touched) &&
    password_FormControl.invalid && password_FormControl.hasError("maxlength")){
    <mat-error>username must be less than 32 characters long!</mat-error>
    }
</mat-form-field>

<mat-form-field>
    <mat-label>Roles</mat-label>
    <mat-select [formControl]="selectedRoles" multiple>
        @for (role of allRoles(); track role) {
        <mat-option [value]="role">{{role}}</mat-option>
        }
    </mat-select>
</mat-form-field>

@if(displayWaitSpinner()){
<app-wait-spinner></app-wait-spinner>
}

<button matButton="elevated" id="submit-btn" [disabled]="username_FormControl.invalid || password_FormControl.invalid">
    Submit
</button>